{"changed":true,"filter":false,"title":"state.js","tooltip":"/src/data/state.js","value":"define(['../utils/obj'], function(k) {\n    'use strict';\n\n    /* State\n     * @class\n     * @classdesc This class reprensent an automata state */\n    var State = (function() {\n        /*\n         * Constructor Automata State\n         *\n         * @constructor\n         * @param {[ItemRule]} options.items Array of item rules that initialy compone this state\n         */\n        var state = function(options) {\n            this.options = options;\n\n            k.utils.obj.defineProperty(this, 'transitions');\n            k.utils.obj.defineProperty(this, '_items');\n\n            this.transitions = options.transitions || [];\n            this._items = options.items || [];\n            this._index = 0;\n            this._registerItems = {};\n\n            for (var i = 0; i < this._items.length; i++) {\n                this._registerItems[this._items[i].rule.index] = true;\n            }\n        };\n\n        /* @function Get the next unprocessed item rule\n         * @returns Item Rule */\n        state.prototype.getNextItem = function() {\n            return this._index < this._items.length ? this._items[this._index++] : null;\n        };\n\n        /* @function Adds an array of item rule into the state. Only the rules that are not already present in the state will be added\n         * @param {[ItemRule]} itemRules Array of item rules to add into the state\n         * @returns {void} Nothing */\n        state.prototype.addItems = function(itemRules) {\n            for (var i = 0; i < itemRules.length; i++) {\n                if (!this._registerItems[itemRules[i].rule.index]) {\n                    this._registerItems[itemRules[i].rule.index] = true;\n                    this._items.push(itemRules[i]);\n                }\n            }\n        };\n\n        /* @function Convert the current state to its string representation\n         * @returns {String} formatted string */\n        state.prototype.toString = function() {\n            var strResult = 'ID: ' + this.getIdentity() + '\\n';\n            for (var i = 0; i < this._items.length; i++) {\n                strResult += this._items[i].toString() + '\\n';\n            }\n            strResult += '\\nTRANSITIONS:\\n';\n\n            for (i = 0; i < this.transitions.length; i++) {\n                strResult += '*--' + this.transitions[i].symbol + '-->' + this.transitions[i].state.getIdentity() + '\\n';\n            }\n            return strResult;\n        };\n\n        /** @function Generates an ID that identify this state from any other state\n         * @returns {String} Generated ID  */\n        state.prototype._generateIdentity = function() {\n            var indexes = [];\n            for (var i = 0; i < this._items.length; i++) {\n                indexes.push(this._items[i].rule.index);\n            }\n            return indexes.sort(function(a, b) {\n                return a - b;\n            }).join('-');\n        };\n\n        /** @function Returns the stinrg ID of the current state\n         * @returns String ID  */\n        state.prototype.getIdentity = function() {\n            if (!this._id) {\n                this._id = this._generateIdentity();\n            }\n            return this._id;\n        };\n\n        /* @function Returns a copy the items contained in the current state )\n         * @returns {[ItemRule]} Array of cloned item rules  */\n        state.prototype.getItems = function() {\n            return k.utils.obj.map(this._items, function(item) {\n                return item.clone();\n            });\n        };\n\n        /** @function Get the list of all supported symbol which are valid to generata transition from the current state.\n         * @returns Array of object of the form: {symbol, items} where items have an array of item rules  */\n        state.prototype.getSupportedTransitionSymbols = function() {\n            var itemsAux = {},\n            result = [];\n\n            for (var i = 0; i < this._items.length; i++) {\n                var symbol = this._items[i].getCurrentSymbol();\n                if (symbol) {\n                    if (itemsAux[symbol.name]) {\n                        itemsAux[symbol.name].push(this._items[i]);\n                    }\n                    else {\n                        itemsAux[symbol.name] = [this._items[i]];\n                        result.push({\n                            symbol: symbol,\n                            items: itemsAux[symbol.name]\n                        });\n                    }\n                }\n            }\n\n            return result;\n        };\n\n        /* @function Add a new transaction into the list of transactions of the current state\n         * @param {Symbol} symbol Symbol use to make the transition, like the name of the transition\n         * @param {State} state Destination state arrived when moving with the specified tranisiotn\n         * @returns {Void}  */\n        state.prototype.addTransition = function(symbol, state) {\n            this.transitions.push({\n                symbol: symbol,\n                state: state\n            });\n        };\n        \n        /* @function Determine if the current state is inconsistent or not.\n         * @param {Symbol} symbol Symbol use to make the transition, like the name of the transition\n         * @returns {Boolean} true if the state is inconsistent (invalid), false otherwise */\n        state.prototype.isInconsistent = function() {\n            //TODO TEST THIS\n   -         k.util\n        }\n\n        return state;\n    })();\n\n    k.data = k.utils.obj.extend(k.data || {}, {\n        State: State\n    });\n\n    return k;\n});","undoManager":{"mark":70,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":129,"column":0},"end":{"row":129,"column":99}},"text":"         * @param {State} state Destination state arrived when moving with the specified tranisiotn"},{"action":"removeText","range":{"start":{"row":128,"column":100},"end":{"row":129,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":30},"end":{"row":129,"column":31}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":129,"column":30},"end":{"row":129,"column":31}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":30},"end":{"row":129,"column":31}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":31},"end":{"row":129,"column":32}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":32},"end":{"row":129,"column":33}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":33},"end":{"row":129,"column":34}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":34},"end":{"row":129,"column":35}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":35},"end":{"row":129,"column":36}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":36},"end":{"row":129,"column":37}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":37},"end":{"row":129,"column":38}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":38},"end":{"row":129,"column":39}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":39},"end":{"row":129,"column":40}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":40},"end":{"row":129,"column":41}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":41},"end":{"row":129,"column":42}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":42},"end":{"row":129,"column":43}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":43},"end":{"row":129,"column":44}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":44},"end":{"row":129,"column":45}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":45},"end":{"row":129,"column":46}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":46},"end":{"row":129,"column":47}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":47},"end":{"row":129,"column":48}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":48},"end":{"row":129,"column":49}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":49},"end":{"row":129,"column":50}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":50},"end":{"row":129,"column":51}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":51},"end":{"row":129,"column":52}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":52},"end":{"row":129,"column":53}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":53},"end":{"row":129,"column":54}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":54},"end":{"row":129,"column":55}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":55},"end":{"row":129,"column":56}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":56},"end":{"row":129,"column":57}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":57},"end":{"row":129,"column":58}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":58},"end":{"row":129,"column":59}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":59},"end":{"row":129,"column":60}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":60},"end":{"row":129,"column":61}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":61},"end":{"row":129,"column":62}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":62},"end":{"row":129,"column":63}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":63},"end":{"row":129,"column":64}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":64},"end":{"row":129,"column":65}},"text":"("}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":65},"end":{"row":129,"column":66}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":66},"end":{"row":129,"column":67}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":67},"end":{"row":129,"column":68}},"text":"v"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":68},"end":{"row":129,"column":69}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":69},"end":{"row":129,"column":70}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":70},"end":{"row":129,"column":71}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":71},"end":{"row":129,"column":72}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":72},"end":{"row":129,"column":73}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":73},"end":{"row":129,"column":74}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":129,"column":73},"end":{"row":129,"column":74}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":73},"end":{"row":129,"column":74}},"text":","}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":74},"end":{"row":129,"column":75}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":75},"end":{"row":129,"column":76}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":76},"end":{"row":129,"column":77}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":77},"end":{"row":129,"column":78}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":78},"end":{"row":129,"column":79}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":79},"end":{"row":129,"column":80}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":80},"end":{"row":129,"column":81}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":81},"end":{"row":129,"column":82}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":82},"end":{"row":129,"column":83}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":83},"end":{"row":129,"column":84}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":84},"end":{"row":129,"column":85}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":85},"end":{"row":129,"column":86}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":86},"end":{"row":129,"column":87}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":87},"end":{"row":129,"column":88}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":88},"end":{"row":129,"column":89}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":129,"column":88},"end":{"row":129,"column":89}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":129,"column":87},"end":{"row":129,"column":88}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":129,"column":86},"end":{"row":129,"column":87}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":86},"end":{"row":129,"column":87}},"text":"w"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":87},"end":{"row":129,"column":88}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":88},"end":{"row":129,"column":89}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":89},"end":{"row":129,"column":90}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":12},"end":{"row":131,"column":13}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":13},"end":{"row":131,"column":14}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":14},"end":{"row":131,"column":15}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":15},"end":{"row":131,"column":16}},"text":"O"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":16},"end":{"row":131,"column":17}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":17},"end":{"row":131,"column":18}},"text":"O"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":18},"end":{"row":131,"column":19}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":19},"end":{"row":131,"column":20}},"text":"S"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":131,"column":19},"end":{"row":131,"column":20}},"text":"S"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":19},"end":{"row":131,"column":20}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":20},"end":{"row":131,"column":21}},"text":"E"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":21},"end":{"row":131,"column":22}},"text":"S"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":22},"end":{"row":131,"column":23}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":23},"end":{"row":131,"column":24}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":24},"end":{"row":131,"column":25}},"text":"I"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":25},"end":{"row":131,"column":26}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":131,"column":25},"end":{"row":131,"column":26}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":131,"column":24},"end":{"row":131,"column":25}},"text":"I"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":24},"end":{"row":131,"column":25}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":25},"end":{"row":131,"column":26}},"text":"H"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":26},"end":{"row":131,"column":27}},"text":"I"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":27},"end":{"row":131,"column":28}},"text":"S"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":28},"end":{"row":132,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":132,"column":0},"end":{"row":132,"column":12}},"text":"            "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":132,"column":12},"end":{"row":132,"column":13}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":132,"column":13},"end":{"row":132,"column":14}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":132,"column":14},"end":{"row":132,"column":15}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":132,"column":15},"end":{"row":132,"column":16}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":132,"column":16},"end":{"row":132,"column":17}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":132,"column":17},"end":{"row":132,"column":18}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":132,"column":3},"end":{"row":132,"column":4}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":132,"column":18},"end":{"row":132,"column":19}},"text":"l"}]}]]},"ace":{"folds":[{"start":{"row":3,"column":6},"end":{"row":5,"column":58},"placeholder":"..."},{"start":{"row":7,"column":10},"end":{"row":12,"column":9},"placeholder":"..."},{"start":{"row":24,"column":58},"end":{"row":26,"column":12},"placeholder":"..."},{"start":{"row":29,"column":10},"end":{"row":30,"column":30},"placeholder":"..."},{"start":{"row":31,"column":50},"end":{"row":33,"column":8},"placeholder":"..."},{"start":{"row":35,"column":10},"end":{"row":37,"column":35},"placeholder":"..."},{"start":{"row":38,"column":56},"end":{"row":45,"column":8},"placeholder":"..."},{"start":{"row":47,"column":10},"end":{"row":48,"column":46},"placeholder":"..."},{"start":{"row":49,"column":47},"end":{"row":60,"column":8},"placeholder":"..."},{"start":{"row":62,"column":10},"end":{"row":63,"column":43},"placeholder":"..."},{"start":{"row":64,"column":56},"end":{"row":72,"column":8},"placeholder":"..."},{"start":{"row":74,"column":10},"end":{"row":75,"column":31},"placeholder":"..."},{"start":{"row":76,"column":50},"end":{"row":81,"column":8},"placeholder":"..."},{"start":{"row":83,"column":10},"end":{"row":84,"column":61},"placeholder":"..."},{"start":{"row":85,"column":47},"end":{"row":89,"column":8},"placeholder":"..."},{"start":{"row":91,"column":10},"end":{"row":92,"column":106},"placeholder":"..."},{"start":{"row":93,"column":68},"end":{"row":114,"column":8},"placeholder":"..."},{"start":{"row":120,"column":65},"end":{"row":125,"column":8},"placeholder":"..."},{"start":{"row":138,"column":47},"end":{"row":140,"column":4},"placeholder":"..."}],"scrolltop":91,"scrollleft":0,"selection":{"start":{"row":132,"column":18},"end":{"row":132,"column":19},"isBackwards":false},"options":{"tabSize":4,"useSoftTabs":true,"guessTabSize":false,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":12,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1401632860333}